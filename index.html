<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart Glass AI Simulation</title>
    <style>
        body { margin: 0; background: #0a0a0a; color: #00ff00; font-family: 'Courier New', monospace; overflow: hidden; }

        /* Smart Glass Frame Effect */
        #glass-frame {
            position: absolute; width: 100vw; height: 100vh;
            border-left: 100px solid rgba(20,20,20,0.9);
            border-right: 100px solid rgba(20,20,20,0.9);
            box-sizing: border-box; display: flex; align-items: center; justify-content: center;
        }

        /* The Visual Field (What the camera sees) */
        #camera-view {
            width: 80%; height: 80%; border: 2px solid #333;
            background: radial-gradient(circle, #1a1a1a 0%, #000 100%);
            position: relative; overflow: hidden;
        }

        /* Moveable Obstacle */
        #obstacle {
            position: absolute; width: 100px; height: 100px;
            background: #ff0000; border: 3px solid #fff;
            box-shadow: 0 0 20px rgba(255,0,0,0.8);
            cursor: grab; display: flex; align-items: center; justify-content: center;
            font-size: 12px; font-weight: bold; color: white; border-radius: 5px;
            left: 50%; top: 50%;
        }

        /* Glass HUD Details */
        #hud-top {
            position: absolute; top: 20px; left: 20px;
            padding: 15px; border-left: 4px solid #00ff00; background: rgba(0,20,0,0.5);
        }

        #aim-finder {
            position: absolute; top: 50%; left: 50%; transform: translate(-50%, -50%);
            width: 200px; height: 150px; border: 1px solid rgba(0,255,0,0.3);
            pointer-events: none;
        }

        #target-lock {
            position: absolute; border: 2px solid #00ff00;
            display: none; transition: 0.1s; pointer-events: none;
        }

        .alert-box { color: #ff0000; font-weight: bold; margin-top: 10px; animation: blink 1s infinite; display: none; }
        @keyframes blink { 0% { opacity: 1; } 50% { opacity: 0; } 100% { opacity: 1; } }
    </style>
</head>
<body>

<div id="glass-frame">
    <div id="camera-view">
        <div id="aim-finder"></div> <div id="hud-top">
            <div>MODE: VISION ASSIST</div>
            <div id="obj-name">SCANNING...</div>
            <div id="distance">DIST: -- m</div>
            <div id="warning" class="alert-box">⚠️ CAUTION: OBJECT NEAR</div>
        </div>

        <div id="obstacle">OBSTACLE</div>
        <div id="target-lock"></div>
    </div>
</div>

<script>
    const obstacle = document.getElementById('obstacle');
    const lock = document.getElementById('target-lock');
    const distText = document.getElementById('distance');
    const warning = document.getElementById('warning');
    const objName = document.getElementById('obj-name');

    let isMoving = false;
    let size = 100;

    // Mouse Controls
    obstacle.addEventListener('mousedown', () => isMoving = true);
    document.addEventListener('mouseup', () => isMoving = false);
    
    document.addEventListener('mousemove', (e) => {
        if(isMoving) {
            obstacle.style.left = (e.clientX - size/2 - 100) + 'px';
            obstacle.style.top = (e.clientY - size/2 - 50) + 'px';
            runAILogic();
        }
    });

    // Distance Simulation (Scroll)
    document.addEventListener('wheel', (e) => {
        size += e.deltaY * -0.2;
        size = Math.min(Math.max(40, size), 350);
        obstacle.style.width = size + 'px';
        obstacle.style.height = size + 'px';
        runAILogic();
    });

    function runAILogic() {
        const rect = obstacle.getBoundingClientRect();
        const centerView = document.getElementById('aim-finder').getBoundingClientRect();

        // Check if object is inside sensor area
        if (rect.left < centerView.right && rect.right > centerView.left &&
            rect.top < centerView.bottom && rect.bottom > centerView.top) {
            
            lock.style.display = 'block';
            lock.style.left = (rect.left - 110) + 'px'; // Offset adjustments
            lock.style.top = (rect.top - 60) + 'px';
            lock.style.width = rect.width + 'px';
            lock.style.height = rect.height + 'px';

            // Calculate Distance
            const dist = (300 / size).toFixed(1);
            distText.innerText = `DIST: ${dist} m`;
            objName.innerText = "OBJECT: CHAIR";

            if(dist < 1.0) {
                warning.style.display = 'block';
                speakOnce(`Alert! Object at ${dist} meters.`);
            } else {
                warning.style.display = 'none';
            }
        } else {
            lock.style.display = 'none';
            distText.innerText = "DIST: -- m";
            objName.innerText = "SCANNING...";
        }
    }

    let lastTime = 0;
    function speakOnce(msg) {
        if(Date.now() - lastTime > 3000) {
            const utter = new SpeechSynthesisUtterance(msg);
            window.speechSynthesis.speak(utter);
            lastTime = Date.now();
        }
    }
</script>

</body>
</html>
