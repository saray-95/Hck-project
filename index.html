<!DOCTYPE html>
<html>
<head>
<meta charset="UTF-8">
<title>AI Smart Glass</title>
<meta name="viewport" content="width=device-width, initial-scale=1.0">

<style>
body{
  margin:0;
  background:#0A0A0A;
  color:white;
  font-family:Arial;
}

.screen{display:none;padding:20px}
.screen.active{display:block}

.button{
  background:#22d3ee;
  padding:15px;
  border-radius:50px;
  text-align:center;
  margin:10px 0;
  font-weight:bold;
  cursor:pointer;
  color:black;
}

.sos{background:#ef4444;color:white}

video{
  width:100%;
  border-radius:20px;
  margin-top:10px;
}

.navbar{
  position:fixed;
  bottom:0;
  width:100%;
  display:flex;
  justify-content:space-around;
  background:#111;
  padding:10px;
}
</style>
</head>

<body>

<!-- HOME -->
<div class="screen active" id="home">
  <h2>Smart Glass</h2>
  <div class="button" onclick="go('nav')">Start Navigation</div>
  <div class="button" onclick="startCamera()">Start Camera</div>
  <div class="button sos" onclick="sendSOS()">Send SOS</div>
</div>

<!-- NAV -->
<div class="screen" id="nav">
  <h2>Navigation</h2>
  <p id="navText">Say "home" or "sos"</p>
</div>

<div class="navbar">
  <div onclick="go('home')">Home</div>
  <div onclick="go('nav')">Nav</div>
</div>

<video id="camera" autoplay playsinline></video>

<script>

// Screen switch
function go(id){
  document.querySelectorAll(".screen")
    .forEach(s=>s.classList.remove("active"));
  document.getElementById(id).classList.add("active");
}

// CAMERA
function startCamera(){
  navigator.mediaDevices.getUserMedia({video:true})
  .then(stream=>{
    document.getElementById("camera").srcObject = stream;
  })
  .catch(()=>{
    alert("Camera permission denied");
  });
}

// SOS with location
function sendSOS(){
  if(navigator.geolocation){
    navigator.geolocation.getCurrentPosition(pos=>{
      const link = 
      "https://maps.google.com/?q=" +
      pos.coords.latitude + "," + pos.coords.longitude;

      alert("SOS Sent!\nLocation:\n" + link);
    });
  }else{
    alert("Location not supported");
  }
}

// VOICE CONTROL
const SpeechRecognition =
window.SpeechRecognition || window.webkitSpeechRecognition;

if(SpeechRecognition){
  const recognition = new SpeechRecognition();
  recognition.continuous = true;
  recognition.lang = "en-US";

  recognition.onresult = function(event){
    const text = event.results[event.results.length-1][0]
    .transcript.toLowerCase();

    console.log(text);

    if(text.includes("navigation")){
      go("nav");
    }

    if(text.includes("home")){
      go("home");
    }

    if(text.includes("sos")){
      sendSOS();
    }

    if(text.includes("camera")){
      startCamera();
    }
  };

  recognition.start();
}else{
  alert("Voice recognition not supported in this browser");
}

</script>

</body>
</html>
